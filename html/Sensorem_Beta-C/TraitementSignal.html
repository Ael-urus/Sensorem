<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, minimum-scale=1" name="viewport"/>
    <meta content="pdoc 0.10.0" name="generator"/>
    <title>Sensorem_Beta-C.TraitementSignal API documentation</title>
    <meta content="Created on Mon May
4 18:02:18 2020
@author: windows" name="description"/>
    <link as="style" crossorigin href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css"
          integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" rel="preload stylesheet">
    <link as="style" crossorigin
          href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css"
          integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" rel="preload stylesheet">
    <link as="style" crossorigin href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css"
          rel="stylesheet preload">
    <style>
        :root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}
    </style>
    <style media="screen and (min-width: 700px)">
        @media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}
    </style>
    <style media="print">
        @media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}
    </style>
    <script crossorigin defer integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8="
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
    <script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
    <article id="content">
        <header>
            <h1 class="title">Module <code>Sensorem_Beta-C.TraitementSignal</code></h1>
        </header>
        <section id="section-intro">
            <p>Created on Mon May
                4 18:02:18 2020
                @author: windows</p>
            <details class="source">
                <summary>
                    <span>Expand source code</span>
                </summary>
                <pre><code class="python"># !/usr/bin/python
# !python
# -*- coding: utf-8 -*-
&#34;&#34;&#34;
Created on Mon May  4 18:02:18 2020
@author: windows
&#34;&#34;&#34;
try:
    import os
    import codecs
    import glob
    # from tkinter import *
    from tkinter.scrolledtext import ScrolledText
    from tkinter import filedialog, END, Frame, Canvas, TOP, BOTH, NS, EW, INSERT, Tk, Label, \
        Entry, StringVar, Button, Scrollbar, Listbox, VERTICAL, W, E
    import FonctionsSignal as Fs
    from matplotlib.backends.backend_tkagg import (FigureCanvasTkAgg)
    from statistics import mean, pstdev
    import matplotlib.pyplot as plt
except Exception as e:
    print(e)
    input(&#39;***&#39;)


# zone de définition des fonctions


def choisir_dossier():
    # ouvre un dialogue de sélection de répertoire
    # voir http://tkinter.unpythonic.net/wiki/tkFileDialog
    dossier = filedialog.askdirectory(
        title=&#34;Sélectionnez le dossier de fichier (s) de mesure (s)&#34;,
        mustexist=True,
        parent=fenetre,
    )
    # un dossier a vraiment été sélectionné ?
    if dossier:
        # on remplit la liste de fichiers
        remplir_liste(dossier)
    # end if


# end def


def remplir_liste(dossier):
    &#34;&#34;&#34;
        remplit la liste de fichiers à partir de l&#39;emplacement
        @dossier fourni en paramètre de fonction;
    &#34;&#34;&#34;
    # init globales
    global dossier_actuel
    # on conserve le dossier en cours de traitement
    dossier_actuel = dossier
    # on récupère la liste des fichiers
    liste_fichiers = glob.glob(normaliser(dossier, motif_fichiers))
    liste_fichiers.sort()  # tri par ordre alphabetique
    # on met à jour la listbox à travers la variable de contrôle
    cvar_fichiers.set(&#34; &#34;.join(map(os.path.basename, liste_fichiers)))


# end def


def normaliser(chemin, *args):
    &#34;&#34;&#34;met un chemin de fichier en conformité avec l&#39;OS utilisé&#34;&#34;&#34;
    return os.path.normpath(os.path.join(chemin, *args))


# end def


def afficher_fichier(event):
    &#34;&#34;&#34;affiche le contenu du fichier sélectionné&#34;&#34;&#34;
    # on récupère le nom du fichier
    fichier = normaliser(
        dossier_actuel,
        liste_fichiers.get(liste_fichiers.curselection() or 0)
    )
    # est-ce réellement un fichier ?
    if os.path.isfile(fichier):
        affichage_texte.delete(&#34;1.0&#34;, END)
        affichage_texte1.delete(&#34;1.0&#34;, END)
        affichage_texte1.insert(INSERT, &#34;Erreur&#34;)
        # oui, on peut l&#39;ouvrir en forçant l&#39;encodage UTF8
        with codecs.open(fichier, &#39;r&#39;, encoding=&#39;utf-8&#39;,
                         errors=&#39;ignore&#39;) as file_in:
            # on efface d&#39;abord la zone de texte
            affichage_texte.delete(&#34;1.0&#34;, END)
            # on insère le nouveau contenu texte du fichier         
            affichage_texte.insert(&#34;1.0&#34;, file_in.read())
            conteneur_canv = Frame(fenetre)
            dessin = Canvas(fenetre, bg=&#39;white&#39;, height=250, width=300)
            fig = plt.figure(1, figsize=(6, 3))
            # y = []
            plt.clf()
            y = Fs.readColCSV(fichier, &#34;;&#34;, 2)
            if y:
                values_sep_paliers, values, values_sep1, paliers_find = Fs.traitement_signal(y)
                plt.plot(y, linewidth=0.5)
            else :
                plt.clf()
            # traitement deuxieme capteur
            y2 = Fs.readColCSV(fichier, &#34;;&#34;, 10)
            if y2:
                values_sep_paliers_2, values_2, values_sep1_2, paliers_find_2 = Fs.traitement_signal2(y2)
                plt.plot(y2, &#39;r&#39;, linewidth=0.5)
            else :
                values_sep_paliers_2 = values_2 = values_sep1_2 = paliers_find_2 = 0

            canvas = FigureCanvasTkAgg(fig, master=conteneur_canv)
            canvas.draw()
            canvas.get_tk_widget().pack(side=TOP, fill=BOTH, expand=1)
            conteneur_canv.grid(row=2, column=0, sticky=NS + EW, padx=5, pady=5)
            # on efface d&#39;abord la zone de texte
            affichage_texte1.delete(&#34;1.0&#34;, END)
            affichage_texte1.delete(&#34;1.0&#34;, END)
            ###
            er = Fs.isol_capteurs(Fs.readColCSV1(fichier, &#34;;&#34;, 2))

            nc = []
            entete2 = [&#34;--------------------------\nNom capteur\n[N° palier] \tMoyenne [V] \tÉcart-type [mV]&#34;]
            for capteur in er.keys():
                nc.append(capteur)
                entete2.append(str(&#34;\n----------\n&#34;) + str(capteur) + &#34;\n&#34;)
                values1 = er.get(capteur)
                values_sep_paliers, values, values_sep, paliers_find = Fs.traitement_signal(values1)
                donneestraitees2 = [[&#34;0&#34;] * len(entete2)] * paliers_find
                moyenne = list([&#34;&#34;] * paliers_find)
                ecartype = list([&#34;&#34;] * paliers_find)
                #
                for i in range(paliers_find):
                    moyenne[i] = mean(values_sep_paliers[i][7: -7])
                    ecartype[i] = pstdev(values_sep_paliers[i][7: -7]) * 1000
                    donneestraitees2[i] = (str(round(moyenne[i], 4)), str(round(ecartype[i], 4)))
                for i, d in enumerate(donneestraitees2):
                    entete2.append(&#34;[&#34; + str(i) + &#34;]\t&#34; + str(d[0]) + &#34;\t&#34; + str(d[1]) + &#34;\n&#34;)
            affichage_texte1.insert(&#34;0.0&#34;, str(len(nc)) + &#34; capteur(s) trouvé(s) a raccorder !\n&#34;)
            for i, t in enumerate(entete2):
                affichage_texte1.insert(INSERT, t)

            try :
                er2 = Fs.isol_capteurs(Fs.readColCSV1(fichier, &#34;;&#34;, 10))
                nc = []
                entete2 = [&#34;--------------------------\nNom capteur\n[N° palier] \tMoyenne [V] \tÉcart-type [mV]&#34;]
                for capteur in er2.keys():
                    nc.append(capteur)
                    entete2.append(str(&#34;\n----------\n&#34;) + str(capteur) + &#34;\n&#34;)
                    values1 = er2.get(capteur)
                    values_sep_paliers, values, values_sep, paliers_find = Fs.traitement_signal2(values1)
                    donneestraitees2 = [[&#34;0&#34;] * len(entete2)] * paliers_find
                    moyenne = list([&#34;&#34;] * paliers_find)
                    ecartype = list([&#34;&#34;] * paliers_find)
                    #
                    for i in range(paliers_find):
                        moyenne[i] = mean(values_sep_paliers[i][7: -7])
                        ecartype[i] = pstdev(values_sep_paliers[i][7: -7]) * 1000
                        donneestraitees2[i] = (str(round(moyenne[i], 4)), str(round(ecartype[i], 4)))
                    for i, d in enumerate(donneestraitees2):
                        entete2.append(&#34;[&#34; + str(i) + &#34;]\t&#34; + str(d[0]) + &#34;\t&#34; + str(d[1]) + &#34;\n&#34;)
                affichage_texte1.insert(&#34;0.0&#34;, str(len(nc)) + &#34; capteur(s) de référence(s) trouvé(s) sont !\n&#34;)
                for i, t in enumerate(entete2):
                    affichage_texte1.insert(INSERT, t)
            except :
                pass
            conteneur_canv1 = Frame(fenetre)
            dessin1 = Canvas(fenetre, bg=&#39;white&#39;, height=250, width=300)
            fig1 = plt.figure(2, figsize=(6, 3))
            plt.clf()
            plt.plot(values_sep1, linewidth=0.5)
            plt.plot(values_sep1_2, &#39;r&#39;, linewidth=0.5)
            # plt.show()
            canvas = FigureCanvasTkAgg(fig1, master=conteneur_canv1)
            canvas.draw()
            canvas.get_tk_widget().pack(side=TOP, fill=BOTH, expand=1)
            conteneur_canv1.grid(row=2, column=1, sticky=NS + EW, padx=5, pady=5)
        # end with
        file_in.close()
    # end if
# end def


def lance_traitement():
    fichier = normaliser(
        dossier_actuel,
        liste_fichiers.get(liste_fichiers.curselection() or 0)
    )
    # est-ce réellement un fichier ?
    if os.path.isfile(fichier):
        nom_utilisateur = recup_nomutilisateur()
        try:
            Fs.pre_traitement(fichier, nom_utilisateur,2, 10) # passage des numero de colonne a lire
            affichage_texte.delete(&#34;1.0&#34;, END)
            affichage_texte.insert(INSERT, maZone.get() + &#34;, le traitement est terminé.\n&#34;)
            affichage_texte.insert(INSERT, &#34;Merci de sélectionner un fichier&#34;)
        except Exception as e:
            affichage_texte.delete(&#34;1.0&#34;, END)
            affichage_texte.insert(INSERT, maZone.get() + &#34;,!!!!! \n \n---LE TRAITEMENT A ECHOUE--- !!!!!.\n \n&#34;)
            affichage_texte.insert(INSERT, e)
            affichage_texte.insert(INSERT, &#34;\n \nMerci de sélectionner un fichier&#34;)
            affichage_texte.tag_add(&#34;---LE TRAITEMENT A ECHOUE---&#34;, &#34;2.0&#34;, &#34;5.0&#34;)
            affichage_texte.tag_config(&#34;---LE TRAITEMENT A ECHOUE---&#34;, background=&#34;red&#34;, foreground=&#34;blue&#34;)


# On définit la fonction appelée par le info
def recup_nomutilisateur():
    affichage_texte.delete(&#34;1.0&#34;, END)
    affichage_texte.insert(&#34;1.0&#34;, maZone.get() + &#34;, merci de sélectionner un fichier&#34;)
    return maZone.get()


# début de la fenêtre de selection
# init variables globales


dossier_actuel = &#34;&#34;
motif_fichiers = &#34;*.csv&#34;
# on commence par établir l&#39;interface graphique (GUI)
# on crée la fenêtre principale
fenetre = Tk()

fenetre.title(&#34;Traitement-Signal-capteur(s)&#34; + Fs.version())
# SVP, NE FORCEZ PAS LA GÉOMÉTRIE de la fenêtre /!\
# elle va s&#39;adapter toute seule...
# ~ fenetre.geometry(&#34;1000x800&#34;) --&gt; c&#39;est NON !
# d&#39;autant plus qu&#39;elle sera REDIMENSIONNABLE ensuite
# on ajoute des composants graphiques à la fenêtre principale
# on crée un conteneur pour la gestion des fichiers
#####
conteneur_info = Frame(fenetre)
# On crée un Label
champLabel_nom = Label(conteneur_info, text=&#34;Nom (Trigramme): &#34;)
# champLabel_nom.grid(row=0, column=0)
champLabel_nom.pack(side=&#34;left&#34;)
# On crée un Entry (zone de saisie)
maZone = Entry(conteneur_info, width=5)
# On affiche le Entry dans la fenêtre
maZone.insert(0, &#34;XXX&#34;)
maZone.pack(side=&#34;left&#34;)

# On crée un Boutton
monBouton = Button(conteneur_info, text=&#34;Valide nom&#34;, command=recup_nomutilisateur)
# On affiche le Button dans la fenêtre
monBouton.pack()
# on place le conteneur dans la fenêtre principale
# avec des marges padx et pady
conteneur_info.grid(row=0, column=0, sticky=NS + EW, padx=5, pady=5)

##############################################################################
conteneur_fichiers = Frame(fenetre)
# on rend le conteneur redimensionnable
conteneur_fichiers.columnconfigure(0, weight=1)
conteneur_fichiers.rowconfigure(1, weight=1)
# on crée une étiquette texte dans ce conteneur
Label(
    conteneur_fichiers,
    text=&#34;Veuillez sélectionner un fichier :&#34;
).grid(row=0, column=0, sticky=EW)
# on crée la liste des fichiers
cvar_fichiers = StringVar()
liste_fichiers = Listbox(conteneur_fichiers, listvariable=cvar_fichiers)
liste_fichiers.grid(row=1, column=0, sticky=NS + EW)
# avec sa scrollbar
vbar_fichiers = Scrollbar(conteneur_fichiers, orient=VERTICAL)
vbar_fichiers.grid(row=1, column=1, sticky=NS + W)
# on connecte la scrollbar à la liste des fichiers
liste_fichiers.configure(yscrollcommand=vbar_fichiers.set)
vbar_fichiers.configure(command=liste_fichiers.yview)
# on va gérer l&#39;affichage du fichier sur simple clic
# sur un fichier de la liste
liste_fichiers.bind(&#34;&lt;ButtonRelease-1&gt;&#34;, afficher_fichier)

# on crée un bouton de type &#39;Parcourir&#39;
Button(
    conteneur_fichiers,
    text=&#34;          Sélectionner un dossier                         &#34;,
    command=choisir_dossier,
).grid(row=2, column=0)
# on place le conteneur dans la fenêtre principale
# avec des marges padx et pady
conteneur_fichiers.grid(row=1, column=0, sticky=NS + EW, padx=5, pady=5)
##############################################################################
# on crée un conteneur pour l&#39;affichage
conteneur_affichage = Frame(fenetre)
# on rend le conteneur redimensionnable
conteneur_affichage.columnconfigure(0, weight=1)
conteneur_affichage.rowconfigure(1, weight=1)
# on crée une étiquette texte dans ce conteneur
Label(
    conteneur_affichage,
    text=&#34;               Voici le contenu du fichier :                                                &#34;
).grid(row=0, column=0, sticky=EW)
Label(
    conteneur_affichage,
    text=&#34; Informations trouvées :                                                        &#34;
).grid(row=0, column=1, sticky=EW)
# on crée la zone d&#39;affichage de texte
affichage_texte = ScrolledText(
    conteneur_affichage,
    bg=&#34;white&#34;,
    fg=&#34;blue&#34;,
    font=&#34;sans 9 &#34;,
    height=10,
    width=20,
)
user = recup_nomutilisateur()
# affichage_texte.insert(&#34;1.0&#34;,user+&#34;, merci de sélectionner un fichier&#34;)
affichage_texte.grid(row=1, column=0, sticky=NS + EW)
# on ajoute un bouton &#39;valide&#39;
Button(
    conteneur_affichage,
    text=&#34;Génère le PDF du traitement&#34;,
    command=lance_traitement
).grid(row=2, column=0, sticky=E)
# on ajoute un bouton &#39;quitter&#39;
Button(
    conteneur_affichage,
    text=&#34;Quitter&#34;,
    command=fenetre.destroy
).grid(row=2, column=1, sticky=E)
# on place le conteneur dans la fenêtre principale
# avec des marges padx et pady
conteneur_affichage.grid(row=1, column=1, sticky=NS + EW, padx=5, pady=5)
# on crée la zone d&#39;affichage de texte
affichage_texte1 = ScrolledText(
    conteneur_affichage,
    bg=&#34;white&#34;,
    fg=&#34;blue&#34;,
    font=&#34;sans 9 &#34;,
    height=10,
    width=20,
)
affichage_texte1.grid(row=1, column=1, sticky=NS + EW)
# on rend la fenêtre redimensionnable
fenetre.rowconfigure(0, weight=1)
fenetre.columnconfigure(1, weight=1)

##############################################################################

# pour finir
# on lance la boucle événementielle principale
remplir_liste(&#34;.//&#34;)
fenetre.mainloop()</code></pre>
            </details>
        </section>
        <section>
        </section>
        <section>
        </section>
        <section>
            <h2 class="section-title" id="header-functions">Functions</h2>
            <dl>
                <dt id="Sensorem_Beta-C.TraitementSignal.afficher_fichier"><code class="name flex">
                    <span>def <span class="ident">afficher_fichier</span></span>(<span>event)</span>
                </code></dt>
                <dd>
                    <div class="desc"><p>affiche le contenu du fichier sélectionné</p></div>
                    <details class="source">
                        <summary>
                            <span>Expand source code</span>
                        </summary>
                        <pre><code class="python">def afficher_fichier(event):
    &#34;&#34;&#34;affiche le contenu du fichier sélectionné&#34;&#34;&#34;
    # on récupère le nom du fichier
    fichier = normaliser(
        dossier_actuel,
        liste_fichiers.get(liste_fichiers.curselection() or 0)
    )
    # est-ce réellement un fichier ?
    if os.path.isfile(fichier):
        affichage_texte.delete(&#34;1.0&#34;, END)
        affichage_texte1.delete(&#34;1.0&#34;, END)
        affichage_texte1.insert(INSERT, &#34;Erreur&#34;)
        # oui, on peut l&#39;ouvrir en forçant l&#39;encodage UTF8
        with codecs.open(fichier, &#39;r&#39;, encoding=&#39;utf-8&#39;,
                         errors=&#39;ignore&#39;) as file_in:
            # on efface d&#39;abord la zone de texte
            affichage_texte.delete(&#34;1.0&#34;, END)
            # on insère le nouveau contenu texte du fichier         
            affichage_texte.insert(&#34;1.0&#34;, file_in.read())
            conteneur_canv = Frame(fenetre)
            dessin = Canvas(fenetre, bg=&#39;white&#39;, height=250, width=300)
            fig = plt.figure(1, figsize=(6, 3))
            # y = []
            plt.clf()
            y = Fs.readColCSV(fichier, &#34;;&#34;, 2)
            if y:
                values_sep_paliers, values, values_sep1, paliers_find = Fs.traitement_signal(y)
                plt.plot(y, linewidth=0.5)
            else :
                plt.clf()
            # traitement deuxieme capteur
            y2 = Fs.readColCSV(fichier, &#34;;&#34;, 10)
            if y2:
                values_sep_paliers_2, values_2, values_sep1_2, paliers_find_2 = Fs.traitement_signal2(y2)
                plt.plot(y2, &#39;r&#39;, linewidth=0.5)
            else :
                values_sep_paliers_2 = values_2 = values_sep1_2 = paliers_find_2 = 0

            canvas = FigureCanvasTkAgg(fig, master=conteneur_canv)
            canvas.draw()
            canvas.get_tk_widget().pack(side=TOP, fill=BOTH, expand=1)
            conteneur_canv.grid(row=2, column=0, sticky=NS + EW, padx=5, pady=5)
            # on efface d&#39;abord la zone de texte
            affichage_texte1.delete(&#34;1.0&#34;, END)
            affichage_texte1.delete(&#34;1.0&#34;, END)
            ###
            er = Fs.isol_capteurs(Fs.readColCSV1(fichier, &#34;;&#34;, 2))

            nc = []
            entete2 = [&#34;--------------------------\nNom capteur\n[N° palier] \tMoyenne [V] \tÉcart-type [mV]&#34;]
            for capteur in er.keys():
                nc.append(capteur)
                entete2.append(str(&#34;\n----------\n&#34;) + str(capteur) + &#34;\n&#34;)
                values1 = er.get(capteur)
                values_sep_paliers, values, values_sep, paliers_find = Fs.traitement_signal(values1)
                donneestraitees2 = [[&#34;0&#34;] * len(entete2)] * paliers_find
                moyenne = list([&#34;&#34;] * paliers_find)
                ecartype = list([&#34;&#34;] * paliers_find)
                #
                for i in range(paliers_find):
                    moyenne[i] = mean(values_sep_paliers[i][7: -7])
                    ecartype[i] = pstdev(values_sep_paliers[i][7: -7]) * 1000
                    donneestraitees2[i] = (str(round(moyenne[i], 4)), str(round(ecartype[i], 4)))
                for i, d in enumerate(donneestraitees2):
                    entete2.append(&#34;[&#34; + str(i) + &#34;]\t&#34; + str(d[0]) + &#34;\t&#34; + str(d[1]) + &#34;\n&#34;)
            affichage_texte1.insert(&#34;0.0&#34;, str(len(nc)) + &#34; capteur(s) trouvé(s) a raccorder !\n&#34;)
            for i, t in enumerate(entete2):
                affichage_texte1.insert(INSERT, t)

            try :
                er2 = Fs.isol_capteurs(Fs.readColCSV1(fichier, &#34;;&#34;, 10))
                nc = []
                entete2 = [&#34;--------------------------\nNom capteur\n[N° palier] \tMoyenne [V] \tÉcart-type [mV]&#34;]
                for capteur in er2.keys():
                    nc.append(capteur)
                    entete2.append(str(&#34;\n----------\n&#34;) + str(capteur) + &#34;\n&#34;)
                    values1 = er2.get(capteur)
                    values_sep_paliers, values, values_sep, paliers_find = Fs.traitement_signal2(values1)
                    donneestraitees2 = [[&#34;0&#34;] * len(entete2)] * paliers_find
                    moyenne = list([&#34;&#34;] * paliers_find)
                    ecartype = list([&#34;&#34;] * paliers_find)
                    #
                    for i in range(paliers_find):
                        moyenne[i] = mean(values_sep_paliers[i][7: -7])
                        ecartype[i] = pstdev(values_sep_paliers[i][7: -7]) * 1000
                        donneestraitees2[i] = (str(round(moyenne[i], 4)), str(round(ecartype[i], 4)))
                    for i, d in enumerate(donneestraitees2):
                        entete2.append(&#34;[&#34; + str(i) + &#34;]\t&#34; + str(d[0]) + &#34;\t&#34; + str(d[1]) + &#34;\n&#34;)
                affichage_texte1.insert(&#34;0.0&#34;, str(len(nc)) + &#34; capteur(s) de référence(s) trouvé(s) sont !\n&#34;)
                for i, t in enumerate(entete2):
                    affichage_texte1.insert(INSERT, t)
            except :
                pass
            conteneur_canv1 = Frame(fenetre)
            dessin1 = Canvas(fenetre, bg=&#39;white&#39;, height=250, width=300)
            fig1 = plt.figure(2, figsize=(6, 3))
            plt.clf()
            plt.plot(values_sep1, linewidth=0.5)
            plt.plot(values_sep1_2, &#39;r&#39;, linewidth=0.5)
            # plt.show()
            canvas = FigureCanvasTkAgg(fig1, master=conteneur_canv1)
            canvas.draw()
            canvas.get_tk_widget().pack(side=TOP, fill=BOTH, expand=1)
            conteneur_canv1.grid(row=2, column=1, sticky=NS + EW, padx=5, pady=5)
        # end with
        file_in.close()
    # end if</code></pre>
                    </details>
                </dd>
                <dt id="Sensorem_Beta-C.TraitementSignal.choisir_dossier"><code class="name flex">
                    <span>def <span class="ident">choisir_dossier</span></span>(<span>)</span>
                </code></dt>
                <dd>
                    <div class="desc"></div>
                    <details class="source">
                        <summary>
                            <span>Expand source code</span>
                        </summary>
                        <pre><code class="python">def choisir_dossier():
    # ouvre un dialogue de sélection de répertoire
    # voir http://tkinter.unpythonic.net/wiki/tkFileDialog
    dossier = filedialog.askdirectory(
        title=&#34;Sélectionnez le dossier de fichier (s) de mesure (s)&#34;,
        mustexist=True,
        parent=fenetre,
    )
    # un dossier a vraiment été sélectionné ?
    if dossier:
        # on remplit la liste de fichiers
        remplir_liste(dossier)
    # end if</code></pre>
                    </details>
                </dd>
                <dt id="Sensorem_Beta-C.TraitementSignal.lance_traitement"><code class="name flex">
                    <span>def <span class="ident">lance_traitement</span></span>(<span>)</span>
                </code></dt>
                <dd>
                    <div class="desc"></div>
                    <details class="source">
                        <summary>
                            <span>Expand source code</span>
                        </summary>
                        <pre><code class="python">def lance_traitement():
    fichier = normaliser(
        dossier_actuel,
        liste_fichiers.get(liste_fichiers.curselection() or 0)
    )
    # est-ce réellement un fichier ?
    if os.path.isfile(fichier):
        nom_utilisateur = recup_nomutilisateur()
        try:
            Fs.pre_traitement(fichier, nom_utilisateur,2, 10) # passage des numero de colonne a lire
            affichage_texte.delete(&#34;1.0&#34;, END)
            affichage_texte.insert(INSERT, maZone.get() + &#34;, le traitement est terminé.\n&#34;)
            affichage_texte.insert(INSERT, &#34;Merci de sélectionner un fichier&#34;)
        except Exception as e:
            affichage_texte.delete(&#34;1.0&#34;, END)
            affichage_texte.insert(INSERT, maZone.get() + &#34;,!!!!! \n \n---LE TRAITEMENT A ECHOUE--- !!!!!.\n \n&#34;)
            affichage_texte.insert(INSERT, e)
            affichage_texte.insert(INSERT, &#34;\n \nMerci de sélectionner un fichier&#34;)
            affichage_texte.tag_add(&#34;---LE TRAITEMENT A ECHOUE---&#34;, &#34;2.0&#34;, &#34;5.0&#34;)
            affichage_texte.tag_config(&#34;---LE TRAITEMENT A ECHOUE---&#34;, background=&#34;red&#34;, foreground=&#34;blue&#34;)</code></pre>
                    </details>
                </dd>
                <dt id="Sensorem_Beta-C.TraitementSignal.normaliser"><code class="name flex">
                    <span>def <span class="ident">normaliser</span></span>(<span>chemin, *args)</span>
                </code></dt>
                <dd>
                    <div class="desc"><p>met un chemin de fichier en conformité avec l'OS utilisé</p></div>
                    <details class="source">
                        <summary>
                            <span>Expand source code</span>
                        </summary>
                        <pre><code class="python">def normaliser(chemin, *args):
    &#34;&#34;&#34;met un chemin de fichier en conformité avec l&#39;OS utilisé&#34;&#34;&#34;
    return os.path.normpath(os.path.join(chemin, *args))</code></pre>
                    </details>
                </dd>
                <dt id="Sensorem_Beta-C.TraitementSignal.recup_nomutilisateur"><code class="name flex">
                    <span>def <span class="ident">recup_nomutilisateur</span></span>(<span>)</span>
                </code></dt>
                <dd>
                    <div class="desc"></div>
                    <details class="source">
                        <summary>
                            <span>Expand source code</span>
                        </summary>
                        <pre><code class="python">def recup_nomutilisateur():
    affichage_texte.delete(&#34;1.0&#34;, END)
    affichage_texte.insert(&#34;1.0&#34;, maZone.get() + &#34;, merci de sélectionner un fichier&#34;)
    return maZone.get()</code></pre>
                    </details>
                </dd>
                <dt id="Sensorem_Beta-C.TraitementSignal.remplir_liste"><code class="name flex">
                    <span>def <span class="ident">remplir_liste</span></span>(<span>dossier)</span>
                </code></dt>
                <dd>
                    <div class="desc"><p>remplit la liste de fichiers à partir de l'emplacement
                        @dossier fourni en paramètre de fonction;</p></div>
                    <details class="source">
                        <summary>
                            <span>Expand source code</span>
                        </summary>
                        <pre><code class="python">def remplir_liste(dossier):
    &#34;&#34;&#34;
        remplit la liste de fichiers à partir de l&#39;emplacement
        @dossier fourni en paramètre de fonction;
    &#34;&#34;&#34;
    # init globales
    global dossier_actuel
    # on conserve le dossier en cours de traitement
    dossier_actuel = dossier
    # on récupère la liste des fichiers
    liste_fichiers = glob.glob(normaliser(dossier, motif_fichiers))
    liste_fichiers.sort()  # tri par ordre alphabetique
    # on met à jour la listbox à travers la variable de contrôle
    cvar_fichiers.set(&#34; &#34;.join(map(os.path.basename, liste_fichiers)))</code></pre>
                    </details>
                </dd>
            </dl>
        </section>
        <section>
        </section>
    </article>
    <nav id="sidebar">
        <h1>Index</h1>
        <div class="toc">
            <ul></ul>
        </div>
        <ul id="index">
            <li><h3>Super-module</h3>
                <ul>
                    <li><code><a href="index.html" title="Sensorem_Beta-C">Sensorem_Beta-C</a></code></li>
                </ul>
            </li>
            <li><h3><a href="#header-functions">Functions</a></h3>
                <ul class="">
                    <li><code><a href="#Sensorem_Beta-C.TraitementSignal.afficher_fichier"
                                 title="Sensorem_Beta-C.TraitementSignal.afficher_fichier">afficher_fichier</a></code>
                    </li>
                    <li><code><a href="#Sensorem_Beta-C.TraitementSignal.choisir_dossier"
                                 title="Sensorem_Beta-C.TraitementSignal.choisir_dossier">choisir_dossier</a></code>
                    </li>
                    <li><code><a href="#Sensorem_Beta-C.TraitementSignal.lance_traitement"
                                 title="Sensorem_Beta-C.TraitementSignal.lance_traitement">lance_traitement</a></code>
                    </li>
                    <li><code><a href="#Sensorem_Beta-C.TraitementSignal.normaliser"
                                 title="Sensorem_Beta-C.TraitementSignal.normaliser">normaliser</a></code></li>
                    <li><code><a href="#Sensorem_Beta-C.TraitementSignal.recup_nomutilisateur"
                                 title="Sensorem_Beta-C.TraitementSignal.recup_nomutilisateur">recup_nomutilisateur</a></code>
                    </li>
                    <li><code><a href="#Sensorem_Beta-C.TraitementSignal.remplir_liste"
                                 title="Sensorem_Beta-C.TraitementSignal.remplir_liste">remplir_liste</a></code></li>
                </ul>
            </li>
        </ul>
    </nav>
</main>
<footer id="footer">
    <p>Generated by <a href="https://pdoc3.github.io/pdoc"
                       title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>